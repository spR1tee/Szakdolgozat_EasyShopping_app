#:include kivy_lang/swiper_item.kv
#:include kivy_lang/tab.kv

<NavigationScreen>:
    name: "nav"

    MDBottomNavigation:
        id: bottom_nav
        use_text: False

        MDBottomNavigationItem:
            name: "home"
            icon: "home"

            MDBoxLayout:
                orientation: "vertical"

                MDBoxLayout:
                    id: toolbar_container
                    orientation: "vertical"
                    size_hint_y: None
                    #adaptive_height: True
                    height: "130dp"
                    size_hint_x: None
                    width: root.width
                    # md_bg_color: "red"
                    spacing: "10dp"

                    MDTopAppBar:
                        id: toolbar
                        title: "Válassz kategóriát"
                        pos_hint: {'top': 1}
                        right_action_items: [["magnify", lambda x: app.open_search_field()]]

                    MDSwiper:
                        # md_bg_color: app.theme_cls.primary_color
                        size_hint_y: None
                        height: "60dp"
                        on_swipe:
                            self.get_current_item().ids.icon.shake()
                            app.filter_shops(self.get_current_item().type)

                        MySwiper:
                            icon: "cart"
                            text: "Összes"
                            type: "all"

                        MySwiper:
                            icon: "food"
                            text: "Élelmiszer"
                            type: "food"

                        MySwiper:
                            icon: "laptop"
                            text: "Elektronika"
                            type: "electronics"

                        MySwiper:
                            icon: "tshirt-crew"
                            text: "Ruházat"
                            type: "clothing"

                MDBoxLayout:
                    id: search_container
                    padding: [dp(0), dp(10)]
                    adaptive_height: True


                ScrollView:
                    bar_width: 0
                    do_scroll_y: True

                    MDGridLayout:
                        id: shops_grid
                        adaptive_height: True
                        cols: 2
                        padding: [dp(15), dp(15), dp(15), dp(35)]
                        spacing: dp(15)



        MDBottomNavigationItem:
            name: "shopping_list"
            icon: "list-box"
            on_tab_press: app.check_if_registered()

            MDFloatLayout:
                MDLabel:
                    id: task_label
                    halign: 'center'
                    markup: True
                    text: "[b]Bevásárlólista[/b]"
                    pos_hint: {'y': .45}

                ScrollView:
                    pos_hint: {'center_y': .5, 'center_x': .5}
                    size_hint: .9, .8

                    MDList:
                        id: container

                MDFloatingActionButton:
                    icon: 'plus-thick'
                    on_release: app.show_item_dialog()
                    elevation_normal: 12
                    pos_hint: {'x': .8, 'y':.05}

        MDBottomNavigationItem:
            name: "profile"
            icon: "account"
            # on_tab_press: app.check_if_registered()

            MDBoxLayout:
                adaptive_size: True
                md_bg_color: "green"
                pos_hint: {"center_x": .5, "center_y": .5}

                MDFlatButton:
                    text: "helloszia"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release: app.go_to_login_screen()

        MDBottomNavigationItem:
            name: "cards"
            icon: "credit-card"
            # on_tab_press: app.check_if_registered()

            MDBoxLayout:
                adaptive_size: True
                md_bg_color: "green"
                pos_hint: {"center_x": .5, "center_y": .5}

                MDFlatButton:
                    text: "hellocsá"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}

        MDBottomNavigationItem:
            name: "favorites"
            icon: "heart"
            # on_tab_press: app.check_if_registered()

            MDBoxLayout:
                orientation: "vertical"

                MDTopAppBar:
                    id: topappbar
                    title: "Kedvencek"
                    pos_hint: {'top': 1}

                ScrollView:
                    bar_width: 0
                    do_scroll_y: True

                    MDGridLayout:
                        id: favs_grid
                        adaptive_height: True
                        cols: 2
                        padding: [dp(15), dp(15), dp(15), dp(35)]
                        spacing: dp(15)